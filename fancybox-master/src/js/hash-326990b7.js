!function(e,t,o){"use strict";function n(){var e=t.location.hash.substr(1),o=e.split("-"),n=o.length>1&&/^\+?\d+$/.test(o[o.length-1])?parseInt(o.pop(-1),10)||1:1,a=o.join("-");return 1>n&&(n=1),{hash:e,index:n,gallery:a}}function a(e){var t;""!==e.gallery&&(t=o("[data-fancybox='"+o.escapeSelector(e.gallery)+"']").eq(e.index-1),t.length?t.trigger("click"):o("#"+o.escapeSelector(e.gallery)).trigger("click"))}function r(e){var t;return e?(t=e.current?e.current.opts:e.opts,t.$orig?t.$orig.data("fancybox"):t.hash||""):!1}o.escapeSelector||(o.escapeSelector=function(e){var t=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,o=function(e,t){return t?"\x00"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e};return(e+"").replace(t,o)});var l=null,c=null;o(function(){setTimeout(function(){o.fancybox.defaults.hash!==!1&&(o(e).on({"onInit.fb":function(e,t){var o,a;t.group[t.currIndex].opts.hash!==!1&&(o=n(),a=r(t),a&&o.gallery&&a==o.gallery&&(t.currIndex=o.index-1))},"beforeShow.fb":function(o,n,a,i){var s;a.opts.hash!==!1&&(s=r(n),s&&""!==s&&(t.location.hash.indexOf(s)<0&&(n.opts.origHash=t.location.hash),l=s+(n.group.length>1?"-"+(a.index+1):""),"replaceState"in t.history?(c&&clearTimeout(c),c=setTimeout(function(){t.history[i?"pushState":"replaceState"]({},e.title,t.location.pathname+t.location.search+"#"+l),c=null},300)):t.location.hash=l))},"beforeClose.fb":function(n,a,i){var s,h;c&&clearTimeout(c),i.opts.hash!==!1&&(s=r(a),h=a&&a.opts.origHash?a.opts.origHash:"",s&&""!==s&&("replaceState"in history?t.history.replaceState({},e.title,t.location.pathname+t.location.search+h):(t.location.hash=h,o(t).scrollTop(a.scrollTop).scrollLeft(a.scrollLeft))),l=null)}}),o(t).on("hashchange.fb",function(){var e=n();o.fancybox.getInstance()?!l||l===e.gallery+"-"+e.index||1===e.index&&l==e.gallery||(l=null,o.fancybox.close()):""!==e.gallery&&a(e)}),o(t).one("unload.fb popstate.fb",function(){o.fancybox.getInstance("close",!0,0)}),a(n()))},50)})}(document,window,window.jQuery);