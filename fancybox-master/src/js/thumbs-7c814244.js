!function(t,i){"use strict";var s=function(t){this.instance=t,this.init()};i.extend(s.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,init:function(){var t=this,i=t.instance.group[0],s=t.instance.group[1];t.$button=t.instance.$refs.toolbar.find("[data-fancybox-thumbs]"),t.instance.group.length>1&&t.instance.group[t.instance.currIndex].opts.thumbs&&("image"==i.type||i.opts.thumb||i.opts.$thumb)&&("image"==s.type||s.opts.thumb||s.opts.$thumb)?(t.$button.on("click",function(){t.toggle()}),t.isActive=!0):(t.$button.hide(),t.isActive=!1)},create:function(){var t,s,n=this.instance;this.$grid=i('<div class="fancybox-thumbs"></div>').appendTo(n.$refs.container),t="<ul>",i.each(n.group,function(i,n){s=n.opts.thumb||(n.opts.$thumb?n.opts.$thumb.attr("src"):null),s||"image"!==n.type||(s=n.src),s&&s.length&&(t+='<li data-index="'+i+'"  tabindex="0" class="fancybox-thumbs-loading"><img data-src="'+s+'" /></li>')}),t+="</ul>",this.$list=i(t).appendTo(this.$grid).on("click","li",function(){n.jumpTo(i(this).data("index"))}),this.$list.find("img").hide().one("load",function(){var t,s,n,e,o=i(this).parent().removeClass("fancybox-thumbs-loading"),h=o.outerWidth(),a=o.outerHeight();t=this.naturalWidth||this.width,s=this.naturalHeight||this.height,n=t/h,e=s/a,n>=1&&e>=1&&(n>e?(t/=e,s=a):(t=h,s/=n)),i(this).css({width:Math.floor(t),height:Math.floor(s),"margin-top":Math.min(0,Math.floor(.3*a-.3*s)),"margin-left":Math.min(0,Math.floor(.5*h-.5*t))}).show()}).each(function(){this.src=i(this).data("src")})},focus:function(){this.instance.current&&this.$list.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+this.instance.current.index+'"]').addClass("fancybox-thumbs-active").focus()},close:function(){this.$grid.hide()},update:function(){this.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),this.isVisible?(this.$grid||this.create(),this.instance.trigger("onThumbsShow"),this.focus()):this.$grid&&this.instance.trigger("onThumbsHide"),this.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),i(t).on({"onInit.fb":function(t,i){i&&!i.Thumbs&&(i.Thumbs=new s(i))},"beforeShow.fb":function(t,i,s,n){var e=i&&i.Thumbs;if(e&&e.isActive){if(s.modal)return e.$button.hide(),void e.hide();n&&i.opts.thumbs.autoStart===!0&&e.show(),e.isVisible&&e.focus()}},"afterKeydown.fb":function(t,i,s,n,e){var o=i&&i.Thumbs;o&&o.isActive&&71===e&&(n.preventDefault(),o.toggle())},"beforeClose.fb":function(t,i){var s=i&&i.Thumbs;s&&s.isVisible&&i.opts.thumbs.hideOnClose!==!1&&s.close()}})}(document,window.jQuery);